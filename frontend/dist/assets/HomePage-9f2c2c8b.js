var F=Object.defineProperty;var V=(s,t,r)=>t in s?F(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var j=(s,t,r)=>(V(s,typeof t!="symbol"?t+"":t,r),r);import{g as D,j as e,h as q,m as I,i as U,k as W,B as E,C as Q,b as K,l as z,R as y,r as c,n as G,X as O,o as Y,p as J,M as X,q as f,H as Z,U as M,s as ee,t as te,v as se,w as re,E as _,x as ae,y as ie,z as ne,O as oe,F as le,G as ce,J as de,V as P}from"./index-9567db93.js";function he({className:s=""}){const{availableThemes:t,currentThemeId:r,setTheme:a}=D();return e.jsxs("div",{className:`space-y-6 ${s}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{size:20,style:{color:"var(--text-accent)"}}),e.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Escolha seu Tema"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(i=>e.jsxs(I.div,{className:`
              relative p-4 rounded-xl border-2 cursor-pointer transition-all duration-300
              ${r===i.id?"border-white/40 shadow-lg":"border-white/10 hover:border-white/25"}
            `,style:{backgroundColor:"var(--background-card)",backdropFilter:"blur(20px)"},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(i.id),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full border border-white/20",style:{background:`linear-gradient(135deg, ${i.preview.primary} 0%, ${i.preview.secondary} 50%, ${i.preview.accent} 100%)`}}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",style:{color:"var(--text-primary)"},children:i.name}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:i.description})]})]}),e.jsxs("div",{className:"flex gap-1 mb-3",children:[e.jsx("div",{className:"flex-1 h-2 rounded-l",style:{backgroundColor:i.preview.primary}}),e.jsx("div",{className:"flex-1 h-2",style:{backgroundColor:i.preview.secondary}}),e.jsx("div",{className:"flex-1 h-2 rounded-r",style:{backgroundColor:i.preview.accent}})]}),e.jsx(U,{children:r===i.id&&e.jsx(I.div,{className:"absolute top-2 right-2",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},children:e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--button-primary)"},children:e.jsx(W,{size:14,className:"text-white",strokeWidth:3})})})})]},i.id))})]})}function ue({currentPage:s,totalPages:t,onPageChange:r}){return t<=1?null:e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-4",children:[e.jsx(E,{variant:"secondary",disabled:s===1,onClick:()=>r(Math.max(1,s-1)),icon:e.jsx(Q,{size:16})}),e.jsxs("span",{className:"px-3 py-1 text-sm",children:[s," / ",t]}),e.jsx(E,{variant:"secondary",disabled:s===t,onClick:()=>r(Math.min(t,s+1)),icon:e.jsx(K,{size:16})})]})}const{Axios:Ie,AxiosError:me,CanceledError:Me,isCancel:Pe,CancelToken:De,VERSION:qe,all:Oe,Cancel:_e,isAxiosError:Be,spread:He,toFormData:Fe,AxiosHeaders:Ve,HttpStatusCode:Ue,formToJSON:We,getAdapter:Qe,mergeConfig:Ke}=z;function xe(s,t){let r;return(...a)=>{clearTimeout(r),r=setTimeout(()=>s.apply(null,a),t)}}function pe(s,t){let r;return(...a)=>{r||(s.apply(null,a),r=!0,setTimeout(()=>r=!1,t))}}class fe{constructor(){j(this,"metrics",new Map)}mark(t){this.metrics.set(`${t}-start`,performance.now())}measure(t){const r=this.metrics.get(`${t}-start`);if(r){const a=performance.now()-r;return this.metrics.set(`${t}-duration`,a),a}return 0}getMetric(t){return this.metrics.get(t)}getAllMetrics(){return Object.fromEntries(this.metrics)}clear(){this.metrics.clear()}}const A=new fe;function ge(s,t){const[r,a]=y.useState(s);return c.useEffect(()=>{const i=setTimeout(()=>{a(s)},t);return()=>{clearTimeout(i)}},[s,t]),r}function be(s,t){return c.useMemo(()=>xe(s,t),[s,t])}function we(s,t){return c.useMemo(()=>pe(s,t),[s,t])}function L(s){const t=c.useRef(),r=c.useRef(0);c.useEffect(()=>(t.current=performance.now(),A.mark(`${s}-mount`),()=>{t.current&&(performance.now()-t.current,A.measure(`${s}-lifetime`))}),[s]),c.useEffect(()=>{r.current+=1});const a=c.useCallback(n=>{A.mark(`${s}-${n}`)},[s]),i=c.useCallback(n=>A.measure(`${s}-${n}`),[s]);return{markStart:a,measureEnd:i,renderCount:r.current}}function ve(s,t,r,a=5){const[i,n]=y.useState(0),l=c.useMemo(()=>{const o=Math.ceil(r/t),d=Math.max(0,Math.floor(i/t)-a),h=Math.min(s.length-1,d+o+a*2);return{visibleItems:s.slice(d,h+1).map((p,g)=>({item:p,index:d+g,offsetY:(d+g)*t})),totalHeight:s.length*t,startIndex:d,endIndex:h}},[s,t,r,a,i]),u=we(o=>{n(o.currentTarget.scrollTop)},16);return{...l,onScroll:u}}function je({onSearch:s,placeholder:t="Buscar links...",debounceMs:r=300,className:a=""}){const[i,n]=c.useState(""),[l,u]=c.useState(!1),o=be(s,r),d=c.useCallback(p=>{const g=p.target.value;n(g),o(g)},[o]),h=c.useCallback(()=>{n(""),s("")},[s]),m=c.useCallback(p=>{p.key==="Escape"&&h()},[h]);return e.jsxs("div",{className:`relative w-full ${a}`,children:[e.jsxs("div",{className:`
        relative flex items-center w-full
        bg-white/10 backdrop-blur-md border border-white/20 rounded-xl transition-all duration-300 ease-out
        ${l?"bg-white/15 backdrop-blur-lg shadow-xl border-blue-400/30":"hover:bg-white/12"}
        focus-within:ring-2 focus-within:ring-blue-400/30 focus-within:ring-offset-2 focus-within:ring-offset-transparent
      `,children:[e.jsx("div",{className:"absolute left-4 sm:left-5 z-10",children:e.jsx("div",{className:`
            p-1 rounded-lg transition-all duration-200
            ${l?"bg-blue-400/20 text-blue-300":"text-white/60"}
          `,children:e.jsx(G,{size:18})})}),e.jsx("input",{type:"text",value:i,onChange:d,onKeyDown:m,onFocus:()=>u(!0),onBlur:()=>u(!1),placeholder:t,className:`\r
            w-full pl-12 sm:pl-14 pr-12 sm:pr-14 py-3 sm:py-4 bg-transparent\r
            text-white placeholder-white/50\r
            focus:outline-none focus:ring-0\r
            text-base sm:text-lg font-medium\r
            transition-all duration-200\r
          `,"aria-label":"Buscar links"}),i&&e.jsx("button",{onClick:h,className:`\r
              absolute right-4 sm:right-5 z-10\r
              p-1.5 rounded-lg\r
              text-white/50 hover:text-white\r
              hover:bg-white/15 active:bg-white/20\r
              transition-all duration-200\r
              hover:scale-110 active:scale-95\r
            `,"aria-label":"Limpar busca",children:e.jsx(O,{size:16})})]}),i&&l&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 z-50 animate-slide-down",children:e.jsx("div",{className:"bg-white/15 backdrop-blur-lg border border-white/30 rounded-xl p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 animate-pulse"}),e.jsxs("p",{className:"text-body-sm text-white/80",children:["Buscando por:",e.jsxs("span",{className:"text-white font-semibold ml-1",children:['"',i,'"']})]})]})})})]})}function ye({onMenuClick:s,sidebarOpen:t,sticky:r=!1,onSearch:a,showSearchBar:i=!1}){const{user:n,isAuthenticated:l,logout:u}=Y();D();const o=J(),[d,h]=c.useState(!1),m=o.pathname.startsWith("/admin"),p=o.pathname==="/";return e.jsxs("header",{className:"relative z-50",children:[e.jsx("div",{className:"backdrop-blur-md bg-white/10 border-b border-white/20",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:`flex items-center justify-between ${i?"h-20":"h-16"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[s&&l&&e.jsx("button",{onClick:s,className:"p-2 rounded-lg text-white/60 hover:text-white hover:bg-white/10 transition-all duration-200 md:hidden","aria-label":"Toggle menu",children:t?e.jsx(O,{size:20}):e.jsx(X,{size:20})}),e.jsxs(f,{to:"/",className:"flex items-center space-x-3 text-white hover:text-white/90 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(Z,{size:18,className:"text-white"})}),e.jsxs("span",{className:"text-xl font-bold",children:["FACILITA ",e.jsx("span",{className:"text-blue-300",children:"CHVC"})]})]})]}),i&&a&&e.jsx("div",{className:"flex-1 max-w-2xl mx-8",children:e.jsx(je,{onSearch:a,placeholder:"Buscar...",className:"w-full"})}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-6",children:[!m&&e.jsx(f,{to:"/",className:`
                    text-white/80 hover:text-white transition-colors
                    ${p?"text-white font-medium":""}
                  `,children:"Início"}),l&&!m&&e.jsxs(e.Fragment,{children:[e.jsx(f,{to:"/dashboard",className:"text-white/80 hover:text-white transition-colors",children:"Dashboard"}),e.jsx(f,{to:"/user/links",className:"text-white/80 hover:text-white transition-colors",children:"Meus Links"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>h(!0),className:`\r
                  p-2 rounded-lg\r
                  text-white/60 hover:text-white\r
                  hover:bg-white/10\r
                  transition-all duration-200\r
                `,"aria-label":"Personalizar tema",title:"Personalizar tema",children:e.jsx(q,{size:20})}),l?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"hidden sm:flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center",children:e.jsx(M,{size:16,className:"text-white"})}),e.jsx("span",{className:"text-white/90 font-medium",children:(n==null?void 0:n.name)||(n==null?void 0:n.username)})]}),(n==null?void 0:n.is_admin)&&!m&&e.jsx(f,{to:"/admin",children:e.jsx(E,{variant:"secondary",size:"sm",icon:e.jsx(ee,{size:16}),children:"Admin"})}),e.jsx(E,{variant:"secondary",size:"sm",icon:e.jsx(te,{size:16}),onClick:u,children:e.jsx("span",{className:"hidden sm:inline",children:"Sair"})})]}):e.jsx(f,{to:"/login",children:e.jsx(E,{variant:"primary",size:"sm",icon:e.jsx(M,{size:16}),children:"Entrar"})})]})]})})}),e.jsx(se,{isOpen:d,onClose:()=>h(!1),title:"Personalizar Tema",size:"lg",children:e.jsx(he,{})}),m&&l&&(n==null?void 0:n.is_admin)&&e.jsx("div",{className:"bg-white/5 border-b border-white/10",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("nav",{className:"flex items-center space-x-6 h-12 overflow-x-auto",children:[e.jsx(f,{to:"/admin",className:`
                  whitespace-nowrap py-2 text-sm font-medium transition-colors
                  ${o.pathname==="/admin"?"text-white border-b-2 border-blue-400":"text-white/70 hover:text-white"}
                `,children:"Dashboard"}),e.jsx(f,{to:"/admin/links",className:`
                  whitespace-nowrap py-2 text-sm font-medium transition-colors
                  ${o.pathname.startsWith("/admin/links")?"text-white border-b-2 border-blue-400":"text-white/70 hover:text-white"}
                `,children:"Links"}),e.jsx(f,{to:"/admin/categories",className:`
                  whitespace-nowrap py-2 text-sm font-medium transition-colors
                  ${o.pathname.startsWith("/admin/categories")?"text-white border-b-2 border-blue-400":"text-white/70 hover:text-white"}
                `,children:"Categorias"}),e.jsx(f,{to:"/admin/colors",className:`
                  whitespace-nowrap py-2 text-sm font-medium transition-colors
                  ${o.pathname.startsWith("/admin/colors")?"text-white border-b-2 border-blue-400":"text-white/70 hover:text-white"}
                `,children:"Cores"}),e.jsx(f,{to:"/admin/users",className:`
                  whitespace-nowrap py-2 text-sm font-medium transition-colors
                  ${o.pathname.startsWith("/admin/users")?"text-white border-b-2 border-blue-400":"text-white/70 hover:text-white"}
                `,children:"Usuários"}),e.jsx(f,{to:"/admin/files",className:`
                  whitespace-nowrap py-2 text-sm font-medium transition-colors
                  ${o.pathname.startsWith("/admin/files")?"text-white border-b-2 border-blue-400":"text-white/70 hover:text-white"}
                `,children:"Arquivos"})]})})})]})}function Ne(){const s=new Date().getFullYear();return e.jsxs("footer",{className:"relative z-50 mt-auto",children:[e.jsx("div",{className:"backdrop-blur-md bg-white/5 border-t border-white/20",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-white font-bold text-lg",children:["FACILITA ",e.jsx("span",{className:"text-blue-300",children:"CHVC"})]}),e.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:"Portal centralizado para acesso rápido e organizado aos recursos e sistemas do Centro Hospitalar Virtual Completo."}),e.jsxs("div",{className:"flex items-center space-x-2 text-white/60 text-sm",children:[e.jsx(re,{size:16,className:"text-red-400"}),e.jsx("span",{children:"Desenvolvido com carinho pela equipe CHVC"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-white font-semibold",children:"Links Rápidos"}),e.jsxs("nav",{className:"flex flex-col space-y-2",children:[e.jsx(f,{to:"/",className:"text-white/70 hover:text-white text-sm transition-colors",children:"Página Inicial"}),e.jsx(f,{to:"/dashboard",className:"text-white/70 hover:text-white text-sm transition-colors",children:"Dashboard"}),e.jsxs("a",{href:"/api/ping",target:"_blank",rel:"noopener noreferrer",className:"text-white/70 hover:text-white text-sm transition-colors flex items-center space-x-1",children:[e.jsx("span",{children:"Status da API"}),e.jsx(_,{size:12})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-white font-semibold",children:"Sistema"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-white/70",children:[e.jsx(ae,{size:16}),e.jsx("span",{children:"React + TypeScript"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-white/70",children:[e.jsx(ie,{size:16}),e.jsx("span",{children:"Seguro e Confiável"})]}),e.jsx("div",{className:"text-white/60",children:"Versão: 2.0.0"})]})]})]})})}),e.jsx("div",{className:"bg-black/20 border-t border-white/10",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"text-white/60 text-sm",children:["© ",s," FACILITA CHVC. Todos os direitos reservados."]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx(f,{to:"/admin/login",className:"text-white/60 hover:text-white/80 text-sm transition-colors",children:"Área Administrativa"}),e.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"text-white/60 hover:text-white/80 text-sm transition-colors",children:"Voltar ao topo ↑"})]})]})})})]})}function Ce({children:s,headerProps:t}){return e.jsxs("div",{className:"min-h-screen relative overflow-hidden",style:{background:"var(--bg-primary)"},children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-0 -left-4 w-72 h-72 bg-gradient-to-r from-blue-400/10 to-purple-400/10 rounded-full mix-blend-multiply filter blur-xl animate-pulse"}),e.jsx("div",{className:"absolute top-0 -right-4 w-72 h-72 bg-gradient-to-r from-purple-400/10 to-pink-400/10 rounded-full mix-blend-multiply filter blur-xl animate-pulse",style:{animationDelay:"2s"}}),e.jsx("div",{className:"absolute -bottom-8 left-20 w-72 h-72 bg-gradient-to-r from-yellow-400/5 to-red-400/5 rounded-full mix-blend-multiply filter blur-xl animate-pulse",style:{animationDelay:"4s"}}),e.jsx("div",{className:"absolute inset-0 opacity-[0.02]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Ccircle cx='30' cy='30' r='1.5'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`,backgroundSize:"60px 60px"}}),e.jsx("div",{className:"absolute inset-0 opacity-[0.015] mix-blend-multiply",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}})]}),e.jsx("div",{className:"relative z-10 flex flex-col min-h-screen",children:e.jsxs(ne,{level:"layout",children:[e.jsx(ye,{...t}),e.jsx("main",{className:"flex-1",children:e.jsx("div",{className:"animate-in fade-in slide-up",children:s||e.jsx(oe,{})})}),e.jsx(Ne,{})]})})]})}function B({link:s,onClick:t,className:r="",animationDelay:a=0}){var g;const{markStart:i,measureEnd:n}=L("LinkCard"),[l,u]=c.useState(!1);y.useEffect(()=>{const w=setTimeout(()=>u(!0),a);return()=>clearTimeout(w)},[a]);const o=w=>{i("click"),t?(w.preventDefault(),t(s)):window.open(s.url,"_blank","noopener,noreferrer"),n("click")},d=!!s.image_url,h=!!s.category,m=s.color||"rgba(99, 102, 241, 0.1)",p={backgroundImage:d?`linear-gradient(135deg, ${m}40 0%, ${m}20 100%), url(${s.image_url})`:`linear-gradient(135deg, ${m} 0%, ${m}80 100%)`,backgroundSize:d?"cover, cover":"cover",backgroundPosition:d?"center, center":"center",backgroundBlendMode:d?"overlay, normal":"normal"};return e.jsxs("article",{className:`
        group relative overflow-hidden cursor-pointer
        bg-white/10 backdrop-blur-md border border-white/20 rounded-xl
        hover:bg-white/15 hover:border-white/40 hover:shadow-xl hover:-translate-y-1
        min-h-[200px] sm:min-h-[180px] md:min-h-[200px]
        transform transition-all duration-300 ease-out
        ${l?"animate-fade-in animate-scale-in opacity-100":"opacity-0"}
        ${r}
      `,style:{...p,animationDelay:`${a}ms`},onClick:o,role:"button",tabIndex:0,onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&o(w)},"aria-label":`Acessar ${s.title}`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700 ease-out"}),e.jsxs("div",{className:"relative h-full flex flex-col justify-between p-4 sm:p-5 md:p-6",children:[e.jsxs("header",{className:"flex items-start justify-between gap-3 mb-4",children:[e.jsx("div",{className:"flex-1 min-w-0",children:h&&e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded-full bg-white/20 backdrop-blur-sm border border-white/30 text-white/90 mb-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:((g=s.category)==null?void 0:g.color)||"#6366f1"}}),e.jsx("span",{className:"truncate",children:s.category.name})]})}),e.jsx("div",{className:"flex-shrink-0 p-1.5 rounded-lg bg-white/10 backdrop-blur-sm border border-white/20 opacity-70 group-hover:opacity-100 transition-all duration-300 hover:scale-110",children:s.file_url?e.jsx(le,{size:16,className:"text-white"}):e.jsx(_,{size:16,className:"text-white"})})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("h3",{className:"text-heading-sm text-white font-semibold leading-tight line-clamp-2 mb-2 group-hover:text-white transition-colors",children:s.title}),s.description&&e.jsx("p",{className:"text-body-sm text-white/70 line-clamp-2 mb-3 group-hover:text-white/80 transition-colors",children:s.description}),e.jsxs("footer",{className:"flex items-center justify-between text-xs text-white/60 group-hover:text-white/80 transition-colors",children:[e.jsx("div",{className:"flex items-center gap-2",children:s.clickCount!==void 0&&s.clickCount>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ce,{size:12,className:"text-yellow-400"}),s.clickCount]})}),s.user&&e.jsxs("span",{className:"text-white/50",children:["por ",s.user.name]})]})]})]}),e.jsx("div",{className:"absolute inset-0 rounded-xl border border-transparent bg-gradient-to-r from-white/20 via-transparent to-white/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"}),e.jsx("div",{className:"absolute inset-0 rounded-xl ring-2 ring-transparent group-focus:ring-blue-400/50 transition-all duration-300"})]})}function ke({links:s,loading:t=!1,onLinkClick:r,className:a="",enableVirtualization:i=!1,itemsPerRow:n=4}){const{markStart:l,measureEnd:u}=L("LinksGrid");return y.useEffect(()=>(l("render"),()=>u("render")),[s,l,u]),t?e.jsx("div",{className:`grid-responsive ${a}`,children:Array.from({length:12}).map((o,d)=>e.jsx("div",{className:"animate-fade-in",style:{animationDelay:`${d*50}ms`},children:e.jsx(de,{})},d))}):s.length===0?e.jsx("div",{className:`flex flex-col items-center justify-center py-16 sm:py-20 ${a}`,children:e.jsxs("div",{className:"text-center space-y-6 max-w-md mx-auto px-4",children:[e.jsx("div",{className:"animate-scale-in",children:e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 mx-auto bg-white/10 backdrop-blur-md border border-white/20 rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-10 h-10 sm:w-12 sm:h-12 text-white/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})})}),e.jsxs("div",{className:"animate-slide-up",style:{animationDelay:"100ms"},children:[e.jsx("h3",{className:"text-heading-md text-white mb-2",children:"Nenhum link encontrado"}),e.jsx("p",{className:"text-body-md text-white/70 leading-relaxed",children:"Não encontramos links que correspondam aos seus critérios de busca. Tente ajustar os filtros ou termos de busca."})]})]})}):!i||s.length<50?e.jsx("div",{className:`
        grid-responsive
        ${a}
      `,children:s.map((o,d)=>e.jsx(B,{link:o,onClick:r,animationDelay:Math.min(d*100,800),className:""},o.id))}):e.jsx(Ee,{links:s,onLinkClick:r,className:a})}function Ee({links:s,onLinkClick:t,className:r=""}){const a=y.useRef(null),[i,n]=y.useState(800),l=200,{visibleItems:u,totalHeight:o,onScroll:d}=ve(s,l,i,5);return y.useEffect(()=>{const h=()=>{a.current&&n(a.current.clientHeight)};return h(),window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]),e.jsx("div",{ref:a,className:`relative overflow-auto ${r}`,style:{height:i},onScroll:d,children:e.jsx("div",{style:{height:o,position:"relative"},children:e.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:u.map(({item:h,index:m,offsetY:p})=>e.jsx("div",{style:{position:"absolute",top:Math.floor(m/4)*l,left:`${m%4*25}%`,width:"23%"},children:e.jsx(B,{link:h,onClick:t})},h.id))})})})}function C(s,t,r,a){return{message:s,code:t,status:r,details:a,timestamp:new Date().toISOString(),id:`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}function Re(s){var t,r;if(s instanceof me){const a=(t=s.response)==null?void 0:t.status,i=(r=s.response)==null?void 0:r.data;if(i){if(typeof i=="string")return C(i,"API_ERROR",a);if(i.message)return C(i.message,i.error||i.code||"API_ERROR",a,i.details||i.errors);if(i.error)return C(i.error,"API_ERROR",a)}return C(s.message||"Network error occurred","NETWORK_ERROR",a)}return s instanceof Error?C(s.message,"UNKNOWN_ERROR"):C("An unexpected error occurred","UNKNOWN_ERROR")}class Ae{constructor(t={}){j(this,"client");j(this,"config");j(this,"requestQueue",[]);j(this,"isRefreshing",!1);j(this,"activeRequests",0);this.config={timeout:3e4,retryAttempts:3,retryDelay:1e3,...t},this.client=z.create({baseURL:t.baseURL||{}.VITE_API_URL||"/api",timeout:this.config.timeout,withCredentials:!0,headers:{"Content-Type":"application/json"}}),this.setupInterceptors()}setupInterceptors(){this.client.interceptors.request.use(t=>{var r,a;return this.activeRequests++,this.activeRequests===1&&((a=(r=this.config).onLoadingStart)==null||a.call(r)),t.metadata={startTime:Date.now()},t},t=>{var r,a;return this.activeRequests--,this.activeRequests===0&&((a=(r=this.config).onLoadingEnd)==null||a.call(r)),Promise.reject(t)}),this.client.interceptors.response.use(t=>{var r,a;return this.activeRequests--,this.activeRequests===0&&((a=(r=this.config).onLoadingEnd)==null||a.call(r)),t},async t=>{var a,i,n,l,u;this.activeRequests--,this.activeRequests===0&&((i=(a=this.config).onLoadingEnd)==null||i.call(a));const r=t.config;if(((n=t.response)==null?void 0:n.status)===401&&!(r!=null&&r.skipAuth))return this.handleUnauthorized(t);if(this.shouldRetry(t,r))return this.retryRequest(t);if(!(r!=null&&r.skipErrorHandler)){const o=Re(t);(u=(l=this.config).onError)==null||u.call(l,o)}return Promise.reject(t)})}shouldRetry(t,r){var i;if(!r||r.retryAttempts===0)return!1;const a=(i=t.response)==null?void 0:i.status;return a&&a>=400&&a<500&&a!==408&&a!==429?!1:!t.response||a>=500||t.code==="ECONNABORTED"||a===429}async retryRequest(t){const r=t.config,a=r.retryAttempts??this.config.retryAttempts??3;if(a>0){r.retryAttempts=a-1;const n=(this.config.retryDelay??1e3)*Math.pow(2,(this.config.retryAttempts??3)-a),l=Math.random()*.1*n,u=n+l;return await new Promise(o=>setTimeout(o,u)),this.client(r)}return Promise.reject(t)}async handleUnauthorized(t){var a,i;const r=t.config;if(!this.isRefreshing){this.isRefreshing=!0;try{(i=(a=this.config).onUnauthorized)==null||i.call(a)}finally{this.isRefreshing=!1,this.processQueue()}}return new Promise((n,l)=>{this.requestQueue.push({config:r,resolve:n,reject:l})})}processQueue(){this.requestQueue.forEach(({config:t,resolve:r,reject:a})=>{this.client(t).then(r).catch(a)}),this.requestQueue=[]}get(t,r){return this.client.get(t,r)}post(t,r,a){return this.client.post(t,r,a)}put(t,r,a){return this.client.put(t,r,a)}patch(t,r,a){return this.client.patch(t,r,a)}delete(t,r){return this.client.delete(t,r)}setBaseURL(t){this.client.defaults.baseURL=t}setAuthToken(t){this.client.defaults.headers.common.Authorization=`Bearer ${t}`}clearAuthToken(){delete this.client.defaults.headers.common.Authorization}getActiveRequestsCount(){return this.activeRequests}cancelAllRequests(t="Operation cancelled"){z.CancelToken.source().cancel(t)}}const b=new Ae({onLoadingStart:()=>{},onLoadingEnd:()=>{},onError:s=>{s.status!==401&&s.status!==403&&P.error(s.message)},onUnauthorized:()=>{P.error("Sessão expirada. Faça login novamente."),localStorage.removeItem("loggedIn"),sessionStorage.removeItem("loggedIn"),window.location.pathname!=="/admin/login"&&window.location.pathname!=="/"&&(window.location.href="/admin/login")}}),Se={getAll:()=>b.get("/links"),getById:s=>b.get(`/links/${s}`),create:s=>b.post("/links",s),update:(s,t)=>b.patch(`/links/${s}`,t),delete:s=>b.delete(`/links/${s}`),getStats:()=>b.get("/links/stats")},$e={getAll:()=>b.get("/categories"),getById:s=>b.get(`/categories/${s}`),create:s=>b.post("/categories",s),update:(s,t)=>b.patch(`/categories/${s}`,t),delete:s=>b.delete(`/categories/${s}`)},$=12;function Ge(){const[s,t]=c.useState([]),[r,a]=c.useState([]),[i,n]=c.useState(!0),[l,u]=c.useState(""),[o,d]=c.useState(null),[h,m]=c.useState(1),p=ge(l,300),{markStart:g,measureEnd:w}=L("HomePage");c.useEffect(()=>{(async()=>{g("data-load"),n(!0);try{const[k,R]=await Promise.all([Se.getAll(),$e.getAll()]);t(k.data||[]),a(R.data||[])}catch(k){console.error("Erro ao carregar dados:",k)}finally{n(!1),w("data-load")}})()},[g,w]);const S=c.useMemo(()=>{let x=s;if(p){const N=p.toLowerCase();x=x.filter(v=>{var T;return v.title.toLowerCase().includes(N)||((T=v.category)==null?void 0:T.name.toLowerCase().includes(N))})}o&&(x=x.filter(N=>{var v;return((v=N.category)==null?void 0:v.id)===o})),x.sort((N,v)=>N.title.localeCompare(v.title));const k=Math.ceil(x.length/$),R=(h-1)*$;return{links:x.slice(R,R+$),totalLinks:x.length,totalPages:k,hasResults:x.length>0}},[s,p,o,h]);c.useEffect(()=>{m(1)},[p,o]);const H=x=>{window.open(x.url,"_blank","noopener,noreferrer")};return e.jsxs(Ce,{headerProps:{showSearchBar:!0,onSearch:u},children:[e.jsxs("div",{className:"min-h-screen w-full",children:[e.jsx("section",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsx("button",{onClick:()=>d(null),className:`px-6 py-2 rounded-full font-medium transition-all duration-200 ${o===null?"bg-blue-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:"Todos"}),r.map(x=>e.jsx("button",{onClick:()=>d(x.id),className:`px-6 py-2 rounded-full font-medium transition-all duration-200 ${o===x.id?"bg-blue-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:x.name},x.id))]})}),e.jsx("main",{className:"flex-1 px-4 sm:px-6 lg:px-8 pb-4",children:e.jsx(ke,{links:S.links,loading:i,onLinkClick:H,className:"w-full"})})]}),S.totalPages>1&&e.jsx("section",{className:"flex justify-center py-6",children:e.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-2",children:e.jsx(ue,{currentPage:h,totalPages:S.totalPages,onPageChange:m})})})]})}export{Ge as default};
